<%
@part = part
@index = (params[:index] || @index || 1).to_i
-%>
<div class="page" id="page-<%= @index %>">
  <div class="part" id="part-<%= @index %>">
    <%= hidden_field_tag "part[#{@index - 1}][name]", @part.name %>
    <p>
      <label for="part[<%= @index - 1 %>}][filter_id]">Filter</label>
      <%= select_tag "part[#{@index - 1}][filter_id]", options_for_select([['<none>', '']] + TextFilter.find_all.map { |s| s.registered_id }, @part.filter_id) %>
    </p>
    <div><%= text_area_tag "part[#{@index - 1}][content]", h(@part.content), :class => "textarea", :style => "width: 100%" %></div>
  </div>
</div>
<%
@index += 1;
-%>