= Event Calendar (iCal) Extension for Radiant

Created by: Loren Johnson - www.hellovenado.com
   Version: 0.6
   Contact: loren@hellovenado.com


INSTALLATION 

1. Checkout extension to the vendor/extensions directory of your Radiant app using svn (you may have already done this): 

  svn co http://svn.fn-group.com/radiant_extensions/event_calendar

2. Install VPIM iCal/vCal parsing gem: gem install vpim

3. Copy extension public assets to Radiant public directory. Currently this will create the default public/icals directory which is required
as a home for the cached ical subscription files, this is configurable via Radiant::Config["event_calendar.icals_path"]:

  rake radiant:extensions:event_calendar:update

4. Migrate extensions: rake db:migrate:extensions

5. From Admin navigate to your new "Event Calendars" tab and click "Add a Calendar", enter your iCal subscription URL at this point and press Save.

6. You can now manually refresh the calendar from the subscription once you've saved it by clicking on the Refresh link. 
You may wish to setup a cron job to do this for you automatically: script/runner -e production "Calendar::refresh_all"


NOTES

* The handling of all paths below the node where the Event Calendar Page type gets applied are overridden to capture the calendar "category" and "slug". 
So, if you create a page under Root > Calendar and apply the EventCalendar page type to it, then through admin create a calendar with the category of 
"master" and a name of "youth" you'll be able to access your calendar at http://yoursite.com/calendar/master/youth. Also, you'll also be able to see 
events for all calendars with a category of "master" by navigating to http://yoursite.com/calendar/master/all. 

* For add'l documentation please refer to the Radiant tag reference for the <r:calendar /> tag series.
  

AN EXAMPLE EVENT-CALENDAR IMPLEMENTATION

<r:calendar>
  <table>
    <tr>
      <td>
        <ul>
          <li><r:calendar:nav:week_link class="navLink" /></li> 
          <li><r:calendar:nav:month_link class="navLink" /></li>
          <li><r:calendar:nav:year_link class="navLink" /></li>
         </ul>
      </td>
    </tr>
    <tr>
      <td>
        <h2><r:name /></h2>
        <h3><r:begin_date format="%d %B" /> - <r:end_date format="%d %B" /></h3>
      </td>
    </tr>
  </table>
  <div id="eventList">
   <r:event:each>
      <div class="eventBox">
      <r:header><h5><r:start format="%d %B, %A" /></h5></r:header>
      <table class="event" id="event<r:id />" onclick="toggleVisible('detail<r:id />'); Effect.Highlight('event<r:id />'); return false;">
        <tr>
          <td style="text-transform:uppercase;width:180px;">
            <r:calendar_name />
          </td>
          <td style="">
            <r:title />
          </td>
       </tr>
       <tr>
          <td style="text-transform:uppercase;width:180px;">
          </td>
          <td>
           <div id="detail<r:id />" class="detail">
             <r:timeperiod format="%I:%M %p" /><br />
             <r:location /><br />
             <r:description />
           </div>
         </td>
       </tr>
     </table>
     </div>
    </r:event:each>
  </div>     
</r:calendar>



ROADMAP

* Single page view for each Event, possibly adding ability to associate an Event with a particular Radiant page also.
* Manual event entry screens. Allow manual events to be mixed in with events from subscriptions.
* Tag to create link to source ical file (for offering subscription link)


